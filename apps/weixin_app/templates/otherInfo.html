<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.2.1/css/amazeui.min.css">
		<link rel="stylesheet" type="text/css" href="/static/css/weixin/app.css" />
		<link rel="stylesheet" type="text/css" href="/static/css/weixin/dragdealer.css" />
		<title>第四步</title>
		<style>
			.am-container{
				margin-top: 40px;
			}
			.item-name{
				display: inline-block;
				margin-bottom: 5px;
			}
			.mask{
				background-color: rgba(0,0,0,1);
				color: #fff;
				/*display: none;*/
			}
			.quanzhong{
				background-color: #fff;
				width: 80%;
				padding: 0;
			}
			.quanzhong-bd{
				padding: 10px;
			}
		   .ar {
			text-align: right;
			}
			.apps{
			}
			.app{
				border: 1px solid #d1d3d3;
			    border-radius: 10px;
			    margin-top: 10px;
			    padding: 10px;
			    text-align: center;
			}
		</style>
	</head>

	<body>
		<header data-am-widget="header" class="am-header">
			<div class="am-header-left am-header-nav">
			</div>
			<h3 class="am-header-title" style="margin: 0 4%;font-size:1.7rem">选出你心目中男神、女神的标准</h3>
		</header>
		<div class="am-g">
			<form class="am-form am-form-horizontal" action="/weixin/other_info/" method="POST">{% csrf_token %}			
		   <div class="am-container">
				<div class="am-u-sm-2">
					<span style="display: inline-block;">&nbsp;</span>
					<img width="36px" src="/static/img/weixin/6_03-06.png" />
				</div>
				<div class="am-u-sm-10">
				<input type="hidden" name="heightweight" id="heightweight">
					<span class="item-name">身高</span>
					<div id="slidera" class="dragdealer">
						<div class="handle red-bar">
							<div class="tip">
								<div class="tip-bd bg-green"></div>
								<div class="tip-bt bg-green"></div>
							</div>
						</div>
						<div class="progress-bar bg-green"></div>
					</div>
				</div>
			</div>
			<div class="am-container">
				<div class="am-u-sm-2">
					<span style="display: inline-block;">&nbsp;</span>
					<img width="36px" src="/static/img/weixin/6_10.png" />
				</div>
				<div class="am-u-sm-10">
				<input type="hidden" name="educationweight" id="educationweight">
					<span class="item-name">学历</span>
					<div id="sliderb" class="dragdealer">
						<div class="handle red-bar">
							<div class="tip">
								<div class="tip-bd bg-red"></div>
								<div class="tip-bt bg-red"></div>
							</div>
						</div>
						<div class="progress-bar bg-red"></div>
					</div>
				</div>
			</div>

			<div class="am-container">
				<div class="am-u-sm-2">
				<input type="hidden" name="characterweight" id="characterweight">
					<span style="display: inline-block;">&nbsp;</span>
					<img width="36px" src="/static/img/weixin/6_12.png" />
				</div>
				<div class="am-u-sm-10">
					<span class="item-name">性格</span>
					<div id="sliderc" class="dragdealer">
						<div class="handle red-bar">
							<div class="tip">
								<div class="tip-bd bg-yellow"></div>
								<div class="tip-bt bg-yellow"></div>
							</div>
						</div>
						<div class="progress-bar bg-yellow"></div>
					</div>
				</div>
			</div>
			<div class="am-container" style="margin-bottom: 50px;">
				<div class="am-u-sm-2">
				<input type="hidden" name="incomeweight" id="incomeweight">
					<span style="display: inline-block;">&nbsp;</span>
					<img width="36px" src="/static/img/weixin/6_14.png" />
				</div>
				<div class="am-u-sm-10">
					<span class="item-name">年薪</span>
					<div id="sliderd" class="dragdealer">
						<div class="handle red-bar">
							<div class="tip">
								<div class="tip-bd bg-blue"></div>
								<div class="tip-bt bg-blue"></div>
							</div>
						</div>
						<div class="progress-bar bg-blue"></div>
					</div>
				</div>
			</div>
				<button type="submit" class="pin-btn am-btn am-btn-success am-btn-block">继续</button>
			</form>
			
		</div>
		<div id="guide" class="am-g mask">
			<div class="am-container quanzhong">
				<div class="quanzhong-bd">
					<p style="color: #5EB95E;">什么是权重</p>
					<p style="color: #333;">通过拉动滑动条，调整每一项的权重，权重反映该指标在你心目中的重要程度，数字越大，权重越大</p>
				</div>
				<button style="position: inherit;" type="button" class="am-btn am-btn-success am-btn-block">知道了</button>
			</div>
		</div>
		<div id="share_div" class="am-k mask" style="display: none;">
			<div class="am-container ar">
				<p></p>
				<img width="40px" src="/static/img/weixin/right.png"/>
			</div>
			<div class="am-container">
				<p>1.点击右上角的&nbsp;&nbsp;<img width="30px" src="/static/img/weixin/menu.png"/>&nbsp;&nbsp;按钮</p>
				<p>2.选择&nbsp;&nbsp;<img width="50px" src="/static/img/weixin/friends.png"/>&nbsp;&nbsp;发送给朋友或&nbsp;&nbsp;<img width="50px" src="/static/img/weixin/circle.png"/>&nbsp;&nbsp;分享到朋友圈</p>
			</div>
			<div class="am-container">
				<p>点击分享链接就可以查看你好友的排名哦~</p>
			</div>
			<div class="am-container">
				<p>想了解更多精彩信息,请访问拼爱网(<a href="http://www.pinlove.com">www.pinlove.com</a>)</p>
			</div>
			<div class="am-container">
			  <div class="apps">
					<div class="app android am-u-sm-6"><a style=" color: white;" href="/">Android客户端下载</a></div>
					<div class="app apple am-u-sm-6"><a style=" color: white;" href="/">iphone客户端下载</a></div>
				</div>
			</div>
		</div>
		<iframe id="dwonload" name="dwonload" style="display: none;"></iframe>
		<script src="http://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
		<script src="http://cdn.amazeui.org/amazeui/2.2.1/js/amazeui.min.js"></script>
		<script src="/static/js/weixin/dragdealer.min.js" type="text/javascript" charset="utf-8"></script>
		{% include "weixin_js_base.html" %}
		<script>
			$(function() {
				 	var slider = ['slidera','sliderb','sliderc','sliderd'];
				 	var data = [0.1,0.1,0.1,0.1];
				 	var dds = [];
				 	slider.forEach(function(v,k){
				 		var dd = new Dragdealer(v, {
					    animationCallback: function(x, y) {
					      $('#'+v+' .tip-bd').text(Math.round(x * 100));
					      $('#'+v+' .progress-bar').css('width',x * 100+'%');
					      $('#'+v).closest('.am-container').find('input').val(Math.round(x * 100));
					    },
	//				    x:data[k],
					    slide:false
					  });
					  
					  dds[k] = dd;
				 	});
				 	
				 	$('#guide button').click(function(){
				 		$(this).closest('#guide').hide()
				 	})
				 	
				});
			
			$("form").submit(function(){
			    $.ajax({
                    type: $(this).attr('method'),
                    url: $(this).attr('action'),
                    data:$(this).serialize(),
                    beforeSend: function(XMLHttpRequest){
                    	 $(this).find('button').attr('disabled', 'disabled').html("正在提交...");
                    },
                    success: function(data, textStatus){
                    	if(typeof data!="object"){
                    		data=$.parseJSON(data);
                    	}
                        if(textStatus== 'success'){
                        	if(data.result=='success'){
                        			$('#share_div').css('height',document.body.scrollHeight).show();
                        			show_menu();
                        			$('html,body').animate({scrollTop: '0px'}, 400);
                        	}else{
                        		$('.am-modal .am-modal-bd').text(data.error_message)
                            	$('.am-modal').modal()
                        	}
                        	
                        }
                    },
                    complete: function(XMLHttpRequest, textStatus){
                    	$(this).find('button').removeAttr('disabled').html("下一步");
                    },
                    error: function(response){
                    	$('.am-modal .am-modal-bd').text("请求失败!")
                    	$('.am-modal').modal()
                    }
                });
                return false;
	        });
			function show_menu(){
				wx.showOptionMenu();
			};
		</script>
	</body>

</html>