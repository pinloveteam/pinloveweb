{% extends "base_later.html" %}
 {% load util_filter %}
	<title> {% block title %} 拼爱网--个人主页 {% endblock %} </title>
{% load staticfiles %}
{% block staticfiles %}
<link href="{{STATIC_URL}}css/hoverbox.css" rel="stylesheet">
<link href="{{STATIC_URL}}css/main.css" rel="stylesheet">
<link href="{{STATIC_URL}}css/venobox.css" rel="stylesheet">
<script type="text/javascript" src="{{STATIC_URL}}js/venobox.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/Chart.min.js"></script>
<script type="text/javascript" >
var myFollow={{myFollow}}
var follow={{follow}}
var fans={{fans}}
$(document).ready(function(){
	//卡片效果

	$(".name").mouseover(function(){
		$(this).find("canvas").css("display","inline");
		var ctx = $(this).find("canvas").get(0).getContext("2d");
		var data = {
			labels : ["教育程度","性格","收入情况","样貌","年龄","身高"],
			datasets : [
				{
					fillColor : "rgba(220,0,220,0.5)",
					strokeColor : "rgba(220,0,220,0.1)",
					pointColor : "rgba(220,0,220,1)",
					pointStrokeColor : "rgba(220,0,220,0.1)",
					data : [60,20,40,20,20,40]
				}
				,
				{
					fillColor : "rgba(151,187,205,0.5)",
					strokeColor : "rgba(151,187,205,0.1)",
					pointColor : "rgba(151,187,205,1)",
					pointStrokeColor : "#fff",
					data : [20,20,90,20,20,50]
				}
			]
};
		var myNewChart = new Chart(ctx).Radar(data,{scaleOverride:true,scaleSteps:4,scaleStepWidth:25,scaleStartValue:1});
	});
	$(".name").mouseleave(function(){
		$(this).find("canvas").css("display","none");
	});});
//发送信息
function sendMessage(receiver_id){
	   var reply_content_id='reply_content_'+receiver_id
	   var reply_content=$('#reply_content_'+receiver_id).val();
	   $.getJSON('/message/send/',{receiver_id:receiver_id,reply_content:reply_content},function(data){
		  $('#reply_content_'+receiver_id).val("");
	      alert(data);
	   });
	};
	function attention(userId,isFriend) {
			  $.getJSON("/user/addFriend/",{userId:userId},function(data) {
				  if(data['type']==1){
						$("#attention_"+userId).removeClass("icon_like_0")
						$("#attention_"+userId).addClass("icon_like_1")
						myFollow=myFollow+1
						$('#myFollow').html(myFollow)

				  }else if(data['type']==2){
						$("#attention_"+userId).removeClass("icon_like_0")
						$("#attention_"+userId).addClass("icon_like_2")
						follow=follow+1
						myFollow=myFollow+1
						$('#follow').html(follow)
						$('#myFollow').html(myFollow)
					  }else{
						 $("#attention_"+userId).removeClass("icon_like_1")
						 $("#attention_"+userId).removeClass("icon_like_2")
					     $("#attention_"+userId).addClass("icon_like_0") 
					     if(data['type']==-1){
					    	 myFollow=myFollow-1
						     $('#myFollow').html(myFollow)
					     }else{
					    	 follow=follow-1
							 myFollow=myFollow-1
							 $('#follow').html(follow)
							 $('#myFollow').html(myFollow)
					     }
					     
					  };
			       alert(data['content']);
			       
			       
			    });
		};
</script>
{% endblock %}
{% block css %}

<style type="text/css">	
.name:hover svg {
	cursor:pointer;
    transform: scale(1.5);
    transition: all 0.3s linear 0s;
}

.name svg {
    transform: scale(1);
    transition: all 0.3s linear 0s;
}

.sub-nav {
	margin-top:80px;
}

.sub-nav > li {
	margin:20px;
}

.sub-nav > li > a {
	color:#fff;
	font-weight:bold;
}

.sub-nav-active {
	border:1px solid white;
	text-align:center;
	width: 80px;
}

/*The left side*/
.user_info{
	height:199px;
  }
  
.sns_info{
	height:110px;
}

.send_pic{
	height:194px;
}

.icon_like,.icon_fans,.icon_mutual_like{
	background:url("{{STATIC_URL}}img/关注.png") no-repeat;
	margin-left:8px;
	display:block;
    height: 27px;
    width: 32px;
}

.icon_fans{
	background-image: url("{{STATIC_URL}}img/粉丝.png");
}

.icon_mutual_like{
	background-image: url("{{STATIC_URL}}img/相互关注.png");
}

.icon_like_0,.icon_like_1,.icon_like_2{
	background-image: url("{{STATIC_URL}}img/profile.png");
    background-repeat: no-repeat;
	display: inline-block;
    height: 27px;
    line-height: 14px;
    margin-top: 1px;
    vertical-align: text-top;
    width: 27px;
}
.icon_like_0{
	background-image: url("{{STATIC_URL}}img/like.png");
	title:"未关注"
}
.icon_like_1{
	background-image: url("{{STATIC_URL}}img/slike.png");
	title:"已关注"
}
.icon_like_2{
	background-image: url("{{STATIC_URL}}img/dlike.png");
	title:"相互关注"
}


/* card */
.card{
	margin-right:20px;
	height:260px;
}

canvas{
	display:none;
	position:absolute;
	left:120px;
	top:0;
	background-color: rgba(255, 255, 255, 0.9);
	Z-index:999;
}

.head,.card-introBox{
	border-radius: 50%;
}
.head{
	width: 103px;
    height: 103px;
}
.head_girl{
	border:2px solid rgba(255, 102, 51, 0.6);
}

.head_boy{
	border:2px solid rgba(60, 117, 186, 0.6);
}

.introBox{
	position: relative;
	width: 100px;
    height: 100px;
	left:30px;
	top:4px;
}

.detail_info{
	position:absolute; 
	top:15px;
	left:10px;
	margin:10px;
	color:#fff;
	text-align:center;
}

.card-introBox{
	cursor:pointer;
	background: none repeat scroll 0 0 #000;
	transition: opacity 1s;
	opacity:0;
    width: 100%;
    height: 100%;
    position: absolute;
    left: 2px;
    top: 2px;
}

.card-introBox:hover{
	opacity:0.7;
}

.tag,.other_name{
	text-align:center;
}

.card-nav{
	margin-left:20px;
	position:absolute; 
	top:220px;
	border-bottom: none;
}

.icon_profile,.icon_photo,.icon_msg{
	background: url("{{STATIC_URL}}img/profile.png") no-repeat;
	margin-right:3px;
	display: inline-block;
    height: 24px;
    width: 32px;
}

.icon_photo{
	background-image: url("{{STATIC_URL}}img/photo.png");
}
.icon_msg{
	background-image: url("{{STATIC_URL}}img/msg.png");
}

/*common*/
.img-circle,.img-rounded{
	margin-left:30px; 
	margin-top:4px; 
  }

.name{
	margin:10px; 
	font-weight:bold;
	font-size:16px;
  }

a:hover {
	text-decoration:none;
	}
	
td{
	padding:4px !important;
}

hr{
	margin:7px;
	border:none;
	border-top:1px solid rgba(255, 255, 255, 0.4);
}

.card_panel{
	transition: background 0.5s;
	margin-top:17px;
	width:203px;
	border: 1px solid rgba(255, 255, 255, 0.6);
	background: none repeat scroll 0 0 rgba(255, 255, 255, 0.3);
}

.card_panel:hover{
	background: none repeat scroll 0 0 rgba(255, 255, 255, 0.5);
}

.label,.fR,.btn,.badge,.progress {
    border-radius: 0;
}

.controlArrow {
	transition: border-color 0.5s;
    border-style: solid;
    cursor: pointer;
    height: 0;
    margin-top: -40px;
    position: absolute;
    top: 50%;
    width: 0;
}

.controlArrow.prev {
    border-color: rgba(0, 0, 0, 0) rgba(255, 255, 255, 0.3) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0);
    border-width: 50px 40px 50px 0;
    left: -50px;
    width: 0;
}

.controlArrow.next {
    border-color: rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(255, 255, 255, 0.3);
    border-width: 50px 0 50px 40px;
    right: -45px;
}

.controlArrow.next:hover{
	border-color: rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(255, 255, 255, 0.7);
}

.controlArrow.prev:hover{
	border-color: rgba(0, 0, 0, 0) rgba(255, 255, 255, 0.7) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0);
}
</style>
{% endblock %}
{% block navigation %}
{% endblock %}
{% block content %}
<header class="navbar">
  <div class="container">
    <div class="navbar-header">
    <a href='/'>
      <img alt="140x140" src="{{STATIC_URL}}img/logo.png"/>
    </a>  
    <span class="site_name">拼爱网</span>
    
    </div>
    <nav class="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="#">推荐</a>
        </li>
        <li>
          <a href="/dynamic/">动态</a>
        </li>
        <li class="active">
          <a href="/the_people_nearby/the_people_nearby">附近的人</a>
        </li>
        <li>
          <a href="/search/simple_search/">用户搜索</a>
        </li>
        <li>
          <a href="/game/game_pintu/">缘分拼图</a>
        </li>
		<li>
          <a href="#">+</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <!-- <a href="../about">关于</a> -->
        </li>
      </ul>
    </nav>
  </div>
</header>
<div class="container">
	<div class="row" style="margin-top:63px;">
		<div class="col-md-3">
			<div class="user_info card_panel"> 
				<img alt="140x140" src="{{MEDIA_URL}}{{avatar_name}}" class="head head_boy" style="margin:4px;height:70px;width:70px;"/>
				<div class="name">{{user.username}}</div>
				<hr/>
				<p style="margin:20px 0 20px 20px;">搬砖砌墙敲代码，只为买瓶哇哈哈。</p>
			</div>
			<div class="sns_info card_panel">
				<table class="table">
					<tbody>
					  <tr>
						<td><i class="icon_like"></i></td>
						<td><a href="/user/follow/1">关注</a></td>
						<td><a id="myFollow" href="/user/follow/1">{{myFollow}}</a></td>
					  </tr>
					  <tr>
						<td><i class="icon_fans"></i></td>
						<td><a href="/user/follow/2">粉丝</a></td>
						<td><a id="fans" href="/user/follow/2">{{fans}}</a></td>
					  </tr>
					  <tr>
						<td><i class="icon_mutual_like"></i></td>
						<td><a href="/user/follow/3">相互关注</a></td>
						<td><a id="follow" href="/user/follow/3">{{follow}}</a></td>
					  </tr>
					</tbody>
				</table>
			</div>
			
			<div class="send_pic card_panel">
			</div>
		</div>
		<div class="col-md-9">
<!-- 			<ul class="list-inline sub-nav">
				<li>
					<a href="#"><img alt="140x140" src="./img/动态.png"/><span>动态</span></a>
				</li>
				<li>
					<a href="#"><div class="sub-nav-active">推荐用户</div></a>
				</li>
				<li>
					<a href="#"><div>附近的人</div></a>
				</li>
				<li>
					<a href="#"><div>用户搜索</div></a>
				</li>
				<li>
					<a href="#"><div>缘分拼图</div></a>
				</li>
			</ul> -->
			<div class="row" style="width:894px;">
			{% for page  in pages %}
			{% ifequal forloop.counter|mod:4 1%}
			  {% ifnotequal forloop.counter 1%}
			  <div class="row" style="width:894px;margin-top:20px;">
			   {%endifnotequal%}
		    {%endifequal%}
			
			<div class="card card_panel col-sm-6">
			    <div class="tabbable">
					<div class="tab-content">
						<div class="tab-pane active" id="tab4{{page.user_id}}">
							<div class="introBox venoboxajax" data-gall="gall3" data-type="ajax">
								<img alt="140x140" src="{{MEDIA_URL}}{{page.avatar_name}}" class="head head_girl"/>
								<div class="card-introBox"><span class="detail_info">查看<br/>详细信息</span></div>
							</div>
							<div id="1" class="name other_name">{{page.username}}
														   <a  href="javascript:void(0);" onclick="attention({{page.user_id}},{{page.isFriend}});" data-toggle="tab" ><i class="icon_like_{{page.isFriend}}" id="attention_{{page.user_id}}"></i></a>
							<canvas height="260" width="260"></canvas>
							</div>
							<hr />
						<div class="tag">
							<span>
							  {%ifequal page.age None%}未填{%else%}{{page.age}}岁{%endifequal%}
							</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<span>
							{%ifequal page.city None%}未填{%else%} {{page.city}}{%endifequal%}
							</span>
						</div>
						</div>
						<div class="tab-pane" id="tab5{{page.user_id}}">
							<div class="scroller">
								<ul class="hoverbox">
								<li>
								<a id="firstlink" class="venobox" data-gall="gall1" href="{{STATIC_URL}}img/img1.jpg" title="ss"><img alt="demo1" src="{{STATIC_URL}}img/img1.jpg" title="demo1"></a>
								</li>
								<li>
								<a class="venobox" data-gall="gall1" href="{{STATIC_URL}}img/img2.jpg" title="ss"><img alt="demo1" src="{{STATIC_URL}}img/img2.jpg" title="demo1"></a>
								</li>
								<li>
								<a class="venobox" data-gall="gall1" href="{{STATIC_URL}}img/img3.jpg" title="ss"><img alt="demo1" src="{{STATIC_URL}}img/img3.jpg"></a>
								</li>
								<li>
								<a class="venobox" data-gall="gall1" href="{{STATIC_URL}}img/img4.jpg" title="ss"><img alt="demo1" src="{{STATIC_URL}}img/img4.jpg"></a>
								</li>
								</ul>
							</div>
						</div>
						<div class="tab-pane" id="tab6{{page.user_id}}">
							<textarea id="reply_content_{{page.user_id}}" rows="3"></textarea>
							<button class="btn btn-success" style="float:right;margin-right:13px;" onclick="sendMessage({{page.user_id}});">发送</button> 
						</div>
					</div>
					<ul class="list-inline card-nav">
						<li class="active"><a href="#tab4{{page.user_id}}" data-toggle="tab" title="资料"><i class="icon_profile"></i></a></li>
						<li><a href="#tab5{{page.user_id}}" data-toggle="tab"><i class="icon_photo" title="照片"></i></a></li>
						<li><a href="#tab6{{page.user_id}}" data-toggle="tab"><i class="icon_msg" title="消息"></i></a></li>
					</ul>
				</div>
			</div>
			{% ifequal forloop.counter|mod:4 0%}
			  </div>
			{%endifequal%}
            {% endfor %}
            <!--   {%if pages.paginator.count|greater_than:8 %}-->
			   {% if pages.has_previous %}<a href="?page={{ pages.previous_page_number }}">
			      <div class="controlArrow prev"></div> 
			   {% endif %}
		      {% if pages.has_next %}
		      <a href="?page={{ pages.next_page_number }}"><div class="controlArrow next"></div></a>
		      {% endif %}
            <!--  {%endif%}-->
			
		</div>
	</div>
</div>

<script type="text/javascript">
	 $(document).ready(function(){
		$('.venobox').venobox({
			numeratio: true,
			border: '0'
		});
		$('.venoboxvid').venobox({
			bgcolor: '#000'
		});
		$('.venoboxframe').venobox({
			border: '6px'
		});
		$('.venoboxinline').venobox({
			framewidth: '300px',
			frameheight: '250px',
			border: '6px',
			bgcolor: '#f46f00'
		});
		$('.venoboxajax').venobox({
			border: '30px;',
			frameheight: '220px'
		});
	})
</script>
{% endblock %}